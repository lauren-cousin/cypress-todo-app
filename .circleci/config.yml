# Javascript Node CircleCI 2.0 configuration file
#
# Check https://circleci.com/docs/2.0/language-javascript/ for more details
#
version: 2
jobs:
  build:
    docker:
      # using custom image; see .circleci/images/primary/Dockerfile
      - image: laurnc/node-cypress:0.0.2
    steps:
      - checkout
      ## background your server
      - run:
          working_directory: ~/project
          command: |
            npm install
            npm run pretest
      # wait for localhost:3030 to come up
      - timeout: 10
      - run: 
          working_directory: ~/project
          command: ./node_modules/.bin/cypress run
